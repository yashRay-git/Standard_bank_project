CREATE COMPUTE MODULE QCBS_MF_Compute
	CREATE FUNCTION Main() RETURNS BOOLEAN
	BEGIN
		-- CALL CopyMessageHeaders();
		CALL CopyEntireMessage();
		RETURN TRUE;
	END;

	CREATE PROCEDURE CopyMessageHeaders() BEGIN
		DECLARE I INTEGER 1;
		DECLARE J INTEGER;
		SET J = CARDINALITY(InputRoot.*[]);
		WHILE I < J DO
			SET OutputRoot.*[I] = InputRoot.*[I];
			SET I = I + 1;
		END WHILE;
	END;

	CREATE PROCEDURE CopyEntireMessage() BEGIN
--		 DECLARE slp BOOLEAN;
--		 SET slp = SLEEP(60000);
--		IF InputRoot.HTTPInputHeader.Authorization = 'Bearer eyJraWQiOiJoczI1Ni1rZXkiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzZW5kZXIiLCJzdWIiOiJ7XHJcbiAgICBcIk1TR19JRFwiOiBcIkJBTksxMzAxMTIwMjMxMjMwNDUxMjAwMDNcIixcclxuICAgIFwiQ1JFRF9NQVNUX05VSUJcIjogXCIxNjAwMDAwMDAyOTg5NDJcIixcclxuICAgIFwiQ1JFRF9NQVNUX0NPVU5URVJDRFwiOiBcIk1NQUFCQlwiLFxyXG4gICAgXCJDUkVEX01BU1RfUkVGRVJFTkNFXCI6IFwiMjAyMTAwMDAwMDAwMDAwMDAwMDAxNzYwMlwiLFxyXG4gICAgXCJDUkVEX01BU1RfQ0xJRV9UWVBFXCI6IFwiTlwiLFxyXG4gICAgXCJDUkVEX01BU1RfU0NPUEVcIjogXCIxXCIsXHJcbiAgICBcIkNSRURfTUFTVF9DTElFX0VOVElUWVwiOiBcIkNcIixcclxuICAgIFwiQ1JFRF9NQVNUX1BST0RVQ1RcIjogXCJURVhUTyBURVhUT1wiLFxyXG4gICAgXCJDUkVEX01BU1RfQU1PUlRfVFlQXCI6IFwiU0xBXCIsXHJcbiAgICBcIkNSRURfTUFTVF9UWVBFXCI6IFwiMTAzXCIsXHJcbiAgICBcIkNSRURfTUFTVF9QVVJQXCI6IFwiMVwiLFxyXG4gICAgXCJDUkVEX01BU1RfQU1UUkVRXCI6IFwiMjAuNjUxLDAwXCIsXHJcbiAgICBcIkNSRURfTUFTVF9BTVRBUFBSXCI6IFwiMjAuNjUxLDAwXCIsXHJcbiAgICBcIkNSRURfTUFTVF9DVVJcIjogXCJNWk5cIixcclxuICAgIFwiQ1JFRF9NQVNUX0hJUkVfREFURVwiOiBcIjIwMjYtMDItMjBcIixcclxuICAgIFwiQ1JFRF9NQVNUX0RJU0JfREFURVwiOiBcIjIwMjMtMTEtMjBcIixcclxuICAgIFwiQ1JFRF9NQVNUX1BZTVRfREFURVwiOiBcIjIwMjMtMTItMjBcIixcclxuICAgIFwiQ1JFRF9NQVNUX0FDQ1BfUFJEXCI6IDEsXHJcbiAgICBcIkNSRURfTUFTVF9NQVRfREFURVwiOiBcIjIwMjYtMTItMjBcIixcclxuICAgIFwiQ1JFRF9NQVNUX05PX0lOU1RNVFwiOiAzNixcclxuICAgIFwiQ1JFRF9NQVNUX1JFRlVORF9GUkVRXCI6IFwiM1wiLFxyXG4gICAgXCJDUkVEX01BU1RfSU5UUkFURV9UWVBFXCI6IFwiMVwiLFxyXG4gICAgXCJDUkVEX01BU1RfU1VCQ19DT01NXCI6IFwiMTAuMDAwLDAwXCIsXHJcbiAgICBcIkNSRURfTUFTVF9SRUZfSU5UUkFURVwiOiBcIjFcIixcclxuICAgIFwiQ1JFRF9NQVNUX1RSRl9PUFJcIjogXCIxMTExMTExMTExMTExMTExMTExMTExMTExXCIsXHJcbiAgICBcIkNSRURfTUFTVF9MSU5LX09QUlwiOiBcIk5cIixcclxuICAgIFwiQ1JFRF9NQVNUX1BMQUNFX1VTRVwiOiBcIjEwMDAwMDAwMDBcIixcclxuICAgIFwiQ1JFRF9NQVNUX1NSQ19GVU5EXCI6IFwiUFwiLFxyXG4gICAgXCJDUkVEX01BU1RfUkVTUkNfUEVSQ1wiOiAxMjYsXHJcbiAgICBcIkNSRURfTUFTVF9JTklUQ09OVF9SRUZcIjogXCJkZmxramFzaGZkYVwiXHJcbn0iLCJhdWQiOiJyZWNpdmVyIiwiZXhwIjoxNzI4NDU2MzIwLCJpYXQiOjE3Mjg0NTI3MjB9.VJwsb_tklNxeF0P9asazAgB2HIjVdI_mLwrggfpqbes' THEN
--			SET OutputRoot.JSON.Data.responseMessage.subResponseMessage = 'Success'; -- Success Failure
--			SET OutputRoot.JSON.Data.responseMessage.subResponseCode = 'CB00016821';
--			SET OutputRoot.JSON.Data.Msg_Id = InputRoot.JSON.Data.MSG_ID;
--			SET OutputRoot.JSON.Data.responseCode = '0';
--		ELSE
--			SET OutputRoot.HTTPResponseHeader."X-Original-HTTP-Status-Code" = '401';
--		END IF;
		 -- SET OutputRoot.HTTPResponseHeader."X-Original-HTTP-Status-Code" = '401';
		 -- SET OutputRoot.jso = InputRoot;
		--- SET OutputRoot.HTTPResponseHeader."X-Original-HTTP-Status-Code" = '500';

	END;
END MODULE;